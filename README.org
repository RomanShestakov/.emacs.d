#+TITLE:    Emacs customisation installation notes
#+AUTHOR:   Roman Shestakov
#+LANGUAGE: en

* EMACS setup

I re-used lots of ideas from the following emacs project
https://github.com/jhamrick/emacs

* Environment vars 

** ERL_TOP
The path to erlang installation are loaded from env var ERL_TOP so
this var needs to be set in bash .profile

#+BEGIN_SRC bash
# root of erlang install
export ERL_TOP=/usr/local/lib/erlang
#+END_SRC

** PYTHONPATH

PYTHONPATH is used by python-mode, should be setup by .profile

#+BEGIN_SRC bash
export PYTHONPATH=/usr/local/lib/python2.7/site-packages:
#+END_SRC

If this env is not setup, erlang-path-settings will set the default
location '/usr/local/lib/erlang'

* Emacs plug-ins

Extra packages are installed with el-get

* Extra dependencies:

el-get needs bzr to checkout python-mode. Some plug-ins need tex to compile.

these packages needs to be installed before running el-get install

#+BEGIN_SRC bash
#for linux debian
sudo apt-get install texinfo
sudo apt-get install texlive
sudo apt-get install bzr
sudo apt-get install git
# python mode autocomple with jedi needs vertualenv
sudo apt-get install -y python-virtualenv
sudo pip install ipython
# run jedi install
# M-x jedi:install-server
#+END_SRC

#+BEGIN_SRC bash
# for macos
# use homebrew: ruby -e "$(curl -fsSL https://raw.github.com/Homebrew/homebrew/go/install)"
brew install autoconf
brew install git
brew install bzr
brew install texinfo
#download / manually install mactex
http://www.tug.org/mactex/
# need to install pip and virtualenv for jedi autocompletion to work in python-mode
easy-install pip
pip install virtualenv
pip install ipython
#+END_SRC

* Distel-mode

Distel mode depends on Erlang mode, so need to correct a path to the version of 
tools/emacs (why erlang install doesn't make symlink to it?)

need to add this line in init.el
#+BEGIN_SRC elisp
;; load a path to erlang list as distel install in el-get distel package depends on it
(add-to-list 'load-path "/usr/local/lib/erlang/lib/tools-2.6.14/emacs")
#+END_SRC

* Syntax checker for erlang-mode
I am using [[https://github.com/ten0s/syntaxerl][syntaxerl]], which integrates with flymake

#+BEGIN_SRC bash
git clone git://github.com/ten0s/syntaxerl.git
cd syntaxerl
make
#+END_SRC 

this will generate syntaxerl file which needs to be added to .emacs.d/bin

* Jedi autocompletion mode for python
jedi requires that pip and virtualenv are installed
easy-install pip
pip install virtualenv
then in emacs:
M-x jedi:install-server
* How to create emacs.tar.gz
it is possible to create a distrib of .emacs.d which doesn't have dependency on el-get.
running:
#+BEGIN_SRC 
cd .emacs.d
make tar
#+END_SRC

will create a tar and upload it into repo:
https://github.com/RomanShestakov/em1.git

* How to user emacs.tar.gz on host machine

#+BEGIN_SRC 
git clone https://github.com/RomanShestakov/em1.git
tar -zxvf em1/emacs.tar.gz
cp -r Users/romanshestakov/tmp/tar/.emacs.d/ .
#start with no init
sudo emacs -nw --no-init-file
# comment out 
;;(require 'el-get-settings)
;;(require 'elixir-settings)
;;(require 'helm-settings)
;;(require 'org-mode-settings)
;;(require 'flycheck-mode-settings)
;;(require 'yasnippet-settings)
;;(require 'magit)
in init.el
#+END_SRC
